<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>007.this的理解 | 猪猪的秋招历险记</title>
    <meta name="description" content="zhuzhu-chou">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.d824222e.css" as="style"><link rel="preload" href="/assets/js/app.d821a795.js" as="script"><link rel="preload" href="/assets/js/47.a37ba526.js" as="script"><link rel="prefetch" href="/assets/js/10.e3f9d51e.js"><link rel="prefetch" href="/assets/js/100.e7c2e2a2.js"><link rel="prefetch" href="/assets/js/101.6c07d27a.js"><link rel="prefetch" href="/assets/js/102.887c413c.js"><link rel="prefetch" href="/assets/js/103.1d6d61be.js"><link rel="prefetch" href="/assets/js/104.e55ee457.js"><link rel="prefetch" href="/assets/js/105.412e30b0.js"><link rel="prefetch" href="/assets/js/106.c47f4df5.js"><link rel="prefetch" href="/assets/js/107.870b439e.js"><link rel="prefetch" href="/assets/js/108.4ec851bb.js"><link rel="prefetch" href="/assets/js/109.b07bd02b.js"><link rel="prefetch" href="/assets/js/11.d6d192f4.js"><link rel="prefetch" href="/assets/js/110.128281e6.js"><link rel="prefetch" href="/assets/js/111.4663864c.js"><link rel="prefetch" href="/assets/js/112.6047dd13.js"><link rel="prefetch" href="/assets/js/113.b8082ad5.js"><link rel="prefetch" href="/assets/js/114.b6ae0466.js"><link rel="prefetch" href="/assets/js/115.cf48bc1f.js"><link rel="prefetch" href="/assets/js/116.34d6c0af.js"><link rel="prefetch" href="/assets/js/117.58d44fab.js"><link rel="prefetch" href="/assets/js/118.ce894f2e.js"><link rel="prefetch" href="/assets/js/119.e2a7b804.js"><link rel="prefetch" href="/assets/js/12.40971e3f.js"><link rel="prefetch" href="/assets/js/120.011d3136.js"><link rel="prefetch" href="/assets/js/121.b169830b.js"><link rel="prefetch" href="/assets/js/122.786c3828.js"><link rel="prefetch" href="/assets/js/123.01d1848a.js"><link rel="prefetch" href="/assets/js/124.c441a520.js"><link rel="prefetch" href="/assets/js/125.21cdb4f9.js"><link rel="prefetch" href="/assets/js/126.e45c2624.js"><link rel="prefetch" href="/assets/js/127.ac38254f.js"><link rel="prefetch" href="/assets/js/128.f6d4d0bc.js"><link rel="prefetch" href="/assets/js/129.5a419e08.js"><link rel="prefetch" href="/assets/js/13.d1c5fbb0.js"><link rel="prefetch" href="/assets/js/130.de9b47d3.js"><link rel="prefetch" href="/assets/js/131.9646ee89.js"><link rel="prefetch" href="/assets/js/14.e34de0ff.js"><link rel="prefetch" href="/assets/js/15.472488b8.js"><link rel="prefetch" href="/assets/js/16.374db90a.js"><link rel="prefetch" href="/assets/js/17.5abb1dfa.js"><link rel="prefetch" href="/assets/js/18.c53d9795.js"><link rel="prefetch" href="/assets/js/19.695813fa.js"><link rel="prefetch" href="/assets/js/2.190ddb3b.js"><link rel="prefetch" href="/assets/js/20.a839cd57.js"><link rel="prefetch" href="/assets/js/21.4cb2c381.js"><link rel="prefetch" href="/assets/js/22.9ea4cd56.js"><link rel="prefetch" href="/assets/js/23.1c401a4a.js"><link rel="prefetch" href="/assets/js/24.09aeca42.js"><link rel="prefetch" href="/assets/js/25.de21a5fc.js"><link rel="prefetch" href="/assets/js/26.86fdb144.js"><link rel="prefetch" href="/assets/js/27.1902cbeb.js"><link rel="prefetch" href="/assets/js/28.d7221b51.js"><link rel="prefetch" href="/assets/js/29.0c4b19bd.js"><link rel="prefetch" href="/assets/js/3.a442116a.js"><link rel="prefetch" href="/assets/js/30.e86fdd69.js"><link rel="prefetch" href="/assets/js/31.627ce7d6.js"><link rel="prefetch" href="/assets/js/32.cd4da21e.js"><link rel="prefetch" href="/assets/js/33.02a73b45.js"><link rel="prefetch" href="/assets/js/34.15aefe4e.js"><link rel="prefetch" href="/assets/js/35.001e95e9.js"><link rel="prefetch" href="/assets/js/36.f84a31ae.js"><link rel="prefetch" href="/assets/js/37.454325b3.js"><link rel="prefetch" href="/assets/js/38.87055225.js"><link rel="prefetch" href="/assets/js/39.257a4c49.js"><link rel="prefetch" href="/assets/js/4.d1e9d328.js"><link rel="prefetch" href="/assets/js/40.2e2df2e4.js"><link rel="prefetch" href="/assets/js/41.d00e84a7.js"><link rel="prefetch" href="/assets/js/42.ab66a6dc.js"><link rel="prefetch" href="/assets/js/43.a93faa3d.js"><link rel="prefetch" href="/assets/js/44.68edf81d.js"><link rel="prefetch" href="/assets/js/45.cecb8a02.js"><link rel="prefetch" href="/assets/js/46.39db2fdd.js"><link rel="prefetch" href="/assets/js/48.aad0e3f7.js"><link rel="prefetch" href="/assets/js/49.1364378d.js"><link rel="prefetch" href="/assets/js/5.7c48898c.js"><link rel="prefetch" href="/assets/js/50.b454c855.js"><link rel="prefetch" href="/assets/js/51.975f3695.js"><link rel="prefetch" href="/assets/js/52.b14c05b8.js"><link rel="prefetch" href="/assets/js/53.a81e51d9.js"><link rel="prefetch" href="/assets/js/54.0aeecb53.js"><link rel="prefetch" href="/assets/js/55.a31903b4.js"><link rel="prefetch" href="/assets/js/56.c109660e.js"><link rel="prefetch" href="/assets/js/57.1c308b8b.js"><link rel="prefetch" href="/assets/js/58.d4357baa.js"><link rel="prefetch" href="/assets/js/59.14a4c834.js"><link rel="prefetch" href="/assets/js/6.7e06078c.js"><link rel="prefetch" href="/assets/js/60.f4887bd5.js"><link rel="prefetch" href="/assets/js/61.5e7bbbf3.js"><link rel="prefetch" href="/assets/js/62.3a1a0a65.js"><link rel="prefetch" href="/assets/js/63.8702baf6.js"><link rel="prefetch" href="/assets/js/64.f5bd3f4f.js"><link rel="prefetch" href="/assets/js/65.204fd742.js"><link rel="prefetch" href="/assets/js/66.e6f9fa2e.js"><link rel="prefetch" href="/assets/js/67.657fbd99.js"><link rel="prefetch" href="/assets/js/68.2665ac26.js"><link rel="prefetch" href="/assets/js/69.e09f9aee.js"><link rel="prefetch" href="/assets/js/7.6067a04e.js"><link rel="prefetch" href="/assets/js/70.c8081156.js"><link rel="prefetch" href="/assets/js/71.4bfa1695.js"><link rel="prefetch" href="/assets/js/72.9c9e4b3b.js"><link rel="prefetch" href="/assets/js/73.367500e5.js"><link rel="prefetch" href="/assets/js/74.334b5675.js"><link rel="prefetch" href="/assets/js/75.e70148f8.js"><link rel="prefetch" href="/assets/js/76.e099e1e8.js"><link rel="prefetch" href="/assets/js/77.ca3873ff.js"><link rel="prefetch" href="/assets/js/78.47cf4f3b.js"><link rel="prefetch" href="/assets/js/79.de61ae29.js"><link rel="prefetch" href="/assets/js/8.f956270d.js"><link rel="prefetch" href="/assets/js/80.e2023d3e.js"><link rel="prefetch" href="/assets/js/81.db665f6c.js"><link rel="prefetch" href="/assets/js/82.0fcbe517.js"><link rel="prefetch" href="/assets/js/83.f546847b.js"><link rel="prefetch" href="/assets/js/84.332592a6.js"><link rel="prefetch" href="/assets/js/85.ea13def4.js"><link rel="prefetch" href="/assets/js/86.50c7ec50.js"><link rel="prefetch" href="/assets/js/87.93f71ee2.js"><link rel="prefetch" href="/assets/js/88.0daff6bc.js"><link rel="prefetch" href="/assets/js/89.1c6d7c6c.js"><link rel="prefetch" href="/assets/js/9.59ce1950.js"><link rel="prefetch" href="/assets/js/90.9b2e9f20.js"><link rel="prefetch" href="/assets/js/91.89de4b55.js"><link rel="prefetch" href="/assets/js/92.447d9f68.js"><link rel="prefetch" href="/assets/js/93.d924823b.js"><link rel="prefetch" href="/assets/js/94.a9b22af4.js"><link rel="prefetch" href="/assets/js/95.5ad985f1.js"><link rel="prefetch" href="/assets/js/96.3af25c39.js"><link rel="prefetch" href="/assets/js/97.d244818c.js"><link rel="prefetch" href="/assets/js/98.3af13f67.js"><link rel="prefetch" href="/assets/js/99.2173d072.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d824222e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">猪猪的秋招历险记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="https://github.com/thinkerHope/algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法题库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/others/" class="nav-link">诗和远方</a></div><div class="nav-item"><a href="/JS-%E5%9F%BA%E7%A1%80/thinkerhope.github.io.html" class="nav-link">博客</a></div><div class="nav-item"><a href="https://github.com/thinkerHope" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="https://github.com/thinkerHope/algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法题库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/others/" class="nav-link">诗和远方</a></div><div class="nav-item"><a href="/JS-%E5%9F%BA%E7%A1%80/thinkerhope.github.io.html" class="nav-link">博客</a></div><div class="nav-item"><a href="https://github.com/thinkerHope" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>前端知识体系</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS-V8引擎原理</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS-其它API原理</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>JS-基础</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/JS-基础/001.html" class="sidebar-link">001.Fetch</a></li><li><a href="/JS-基础/002.html" class="sidebar-link">002.执行上下文</a></li><li><a href="/JS-基础/003.html" class="sidebar-link">003.作用域链</a></li><li><a href="/JS-基础/004.html" class="sidebar-link">004.原型链</a></li><li><a href="/JS-基础/005.html" class="sidebar-link">005.Ajax</a></li><li><a href="/JS-基础/006.html" class="sidebar-link">0.1 + 0.2 与 0.3 不相等</a></li><li><a href="/JS-基础/007.html" class="active sidebar-link">007.this的理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS-基础/007.html#_1-全局上下文" class="sidebar-link">1. 全局上下文</a></li><li class="sidebar-sub-header"><a href="/JS-基础/007.html#_2-直接调用函数" class="sidebar-link">2. 直接调用函数</a></li><li class="sidebar-sub-header"><a href="/JS-基础/007.html#_3-对象-方法的形式调用" class="sidebar-link">3. 对象.方法的形式调用</a></li><li class="sidebar-sub-header"><a href="/JS-基础/007.html#_4-dom事件绑定" class="sidebar-link">4. DOM事件绑定</a></li><li class="sidebar-sub-header"><a href="/JS-基础/007.html#_5-new-构造函数" class="sidebar-link">5. new+构造函数</a></li><li class="sidebar-sub-header"><a href="/JS-基础/007.html#_6-箭头函数？" class="sidebar-link">6. 箭头函数？</a></li><li class="sidebar-sub-header"><a href="/JS-基础/007.html#settimeout-的this指向问题" class="sidebar-link">setTimeout 的this指向问题</a></li></ul></li><li><a href="/JS-基础/008.html" class="sidebar-link">008.深拷贝和深冻结</a></li><li><a href="/JS-基础/009.html" class="sidebar-link">009.闭包</a></li><li><a href="/JS-基础/010.html" class="sidebar-link">010.事件冒泡和事件捕获</a></li><li><a href="/JS-基础/011.html" class="sidebar-link">011.JS数组相关操作</a></li><li><a href="/JS-基础/012.html" class="sidebar-link">012.JS类型转换</a></li><li><a href="/JS-基础/013.html" class="sidebar-link">013.JS数据类型</a></li><li><a href="/JS-基础/014.html" class="sidebar-link">014.JS实现继承</a></li><li><a href="/JS-基础/015.html" class="sidebar-link">015.JS正则的理解</a></li><li><a href="/JS-基础/016.html" class="sidebar-link">016.JS正则实例</a></li><li><a href="/JS-基础/017.html" class="sidebar-link">017.JS正则回溯匹配的原理</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS-异步编程及异步IO</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HTTP协议</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>TCP协议</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Chromium-渲染篇</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Chromium-安全篇</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>计网</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>os</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><p>其实JS中的this是一个非常简单的东西，只需要理解它的执行规则就OK。</p> <p>call/apply/bind可以显示绑定, 这里就不说了。</p> <p>主要这些场隐式绑定的场景讨论:</p> <ol><li>全局上下文</li> <li>直接调用函数</li> <li>对象.方法的形式调用</li> <li>DOM事件绑定(特殊)</li> <li>new构造函数绑定</li> <li>箭头函数</li></ol> <h2 id="_1-全局上下文"><a href="#_1-全局上下文" class="header-anchor">#</a> 1. 全局上下文</h2> <p>全局上下文默认this指向window, 严格模式下指向undefined。</p> <h2 id="_2-直接调用函数"><a href="#_2-直接调用函数" class="header-anchor">#</a> 2. 直接调用函数</h2> <p>比如:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> func <span class="token operator">=</span> obj<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这种情况是直接调用。this相当于全局上下文的情况。</p> <h2 id="_3-对象-方法的形式调用"><a href="#_3-对象-方法的形式调用" class="header-anchor">#</a> 3. 对象.方法的形式调用</h2> <p>还是刚刚的例子，我如果这样写:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这就是<code>对象.方法</code>的情况，this指向这个对象</p> <h2 id="_4-dom事件绑定"><a href="#_4-dom事件绑定" class="header-anchor">#</a> 4. DOM事件绑定</h2> <p>onclick和addEventerListener中 this 默认指向绑定事件的元素。</p> <p>IE比较奇异，使用attachEvent，里面的this默认指向window。</p> <h2 id="_5-new-构造函数"><a href="#_5-new-构造函数" class="header-anchor">#</a> 5. new+构造函数</h2> <p>此时构造函数中的this指向实例对象。</p> <h2 id="_6-箭头函数？"><a href="#_6-箭头函数？" class="header-anchor">#</a> 6. 箭头函数？</h2> <p>箭头函数没有this, 因此也不能绑定。里面的this会指向当前最近的非箭头函数的this，找不到就是window(严格模式是undefined)。比如:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token function-variable function">do</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 找到最近的非箭头函数a，a现在绑定着obj, 因此箭头函数中的this是obj</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>优先级: new &gt; call、apply、bind &gt; 对象.方法 &gt; 直接调用。</p></blockquote> <h2 id="settimeout-的this指向问题"><a href="#settimeout-的this指向问题" class="header-anchor">#</a> setTimeout 的this指向问题</h2> <p>由<code>setTimeout()</code>调用的代码运行在与所在函数完全分离的<strong>执行环境</strong>上。这会导致，这些代码中包含的 <code>this</code> 关键字在非严格模式会指向 <code>window</code> (或全局)对象，严格模式下为 undefined，这和所期望的<code>this</code>的值是不一样的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 输出</span>
<span class="token comment">// 对象o</span>
o<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 输出</span>
<span class="token comment">// window对象</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>fn<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>解决方案</strong></p> <p>方案一</p> <p>一个通用的方法是用包装函数来设置<code>this</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>o<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方案二</p> <p>箭头函数也可以：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>o<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方案三</p> <p>通过<code>bind()</code>激活<code>this</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.d821a795.js" defer></script><script src="/assets/js/47.a37ba526.js" defer></script>
  </body>
</html>
