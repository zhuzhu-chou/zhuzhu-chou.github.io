(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{171:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("p",[t._v("å›é¡¾ä¸€ä¸‹ï¼š")]),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("æ²¡æœ‰ä¸€ç§è°ƒåº¦ç­–ç•¥æ˜¯ä¸‡èƒ½çš„, å®ƒéœ€è¦è€ƒè™‘å¾ˆå¤šå› ç´ :")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),n("p",[t._v("vue é€‰æ‹©äº† 1ï¸âƒ£ã€‚è€ŒReact é€‰æ‹©äº†2ï¸âƒ£ ã€‚å¯¹äºWorker å¤šçº¿ç¨‹æ¸²æŸ“æ–¹æ¡ˆä¹Ÿæœ‰äººå°è¯•ï¼Œè¦ä¿è¯çŠ¶æ€å’Œè§†å›¾çš„ä¸€è‡´æ€§ç›¸å½“éº»çƒ¦ã€‚")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),n("p",[t._v("React çš„ Reconcilation æ˜¯CPUå¯†é›†å‹çš„æ“ä½œ, å®ƒå°±ç›¸å½“äºæˆ‘ä»¬ä¸Šé¢è¯´çš„â€™é•¿è¿›ç¨‹â€˜ã€‚æ‰€ä»¥åˆè¡·å’Œè¿›ç¨‹è°ƒåº¦ä¸€æ ·ï¼Œæˆ‘ä»¬è¦è®©é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹æˆ–è€…çŸ­è¿›ç¨‹ä¼˜å…ˆè¿è¡Œï¼Œä¸èƒ½è®©é•¿è¿›ç¨‹é•¿æœŸéœ¸å èµ„æºã€‚")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),n("p",[t._v("è¿™å°±æ˜¯ä¸ºä»€ä¹ˆReact éœ€è¦ Fiber ğŸ˜ã€‚")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),n("p",[t._v("é‚£ä¹ˆç°åœ¨ä½ åº”è¯¥æœ‰ä»¥ä¸‹ç–‘é—®:")]),t._v(" "),t._m(21),t._v(" "),n("p",[t._v("ç­”1ï¸âƒ£: æ²¡é”™ï¼Œä¸»åŠ¨è®©å‡ºæœºåˆ¶")]),t._v(" "),n("p",[t._v("ä¸€æ˜¯æµè§ˆå™¨ä¸­æ²¡æœ‰ç±»ä¼¼è¿›ç¨‹çš„æ¦‚å¿µï¼Œâ€™ä»»åŠ¡â€˜ä¹‹é—´çš„ç•Œé™å¾ˆæ¨¡ç³Šï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ä¸å…·å¤‡ä¸­æ–­/æ¢å¤çš„æ¡ä»¶ã€‚äºŒæ˜¯æ²¡æœ‰æŠ¢å çš„æœºåˆ¶ï¼Œæˆ‘ä»¬æ— æ³•ä¸­æ–­ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºã€‚")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),n("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼Œä¸ºäº†è®©è§†å›¾æµç•…åœ°è¿è¡Œï¼Œå¯ä»¥æŒ‰ç…§äººç±»èƒ½æ„ŸçŸ¥åˆ°æœ€ä½é™åº¦æ¯ç§’60å¸§çš„é¢‘ç‡åˆ’åˆ†æ—¶é—´ç‰‡ï¼Œè¿™æ ·æ¯ä¸ªæ—¶é—´ç‰‡å°±æ˜¯ 16msã€‚")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29),t._m(30),t._v(" "),t._m(31),t._v(" "),n("p",[t._v("æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æµè§ˆå™¨åœ¨ä¸€å¸§(Frameï¼Œå¯ä»¥è®¤ä¸ºäº‹ä»¶å¾ªç¯çš„ä¸€æ¬¡å¾ªç¯)å†…å¯èƒ½ä¼šåšä»€ä¹ˆäº‹æƒ…:")]),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),n("p",[t._v("æµè§ˆå™¨åœ¨ä¸€å¸§å†…å¯èƒ½ä¼šåšæ‰§è¡Œä¸‹åˆ—ä»»åŠ¡ï¼Œè€Œä¸”å®ƒä»¬çš„æ‰§è¡Œé¡ºåºåŸºæœ¬æ˜¯å›ºå®šçš„:")]),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),n("p",[t._v("ç›®å‰ "),n("code",[t._v("requestIdleCallback")]),t._v(" ç›®å‰åªæœ‰Chromeæ”¯æŒã€‚æ‰€ä»¥ç›®å‰ React "),n("a",{attrs:{href:"https://github.com/facebook/react/blob/master/packages/scheduler/src/forks/SchedulerHostConfig.default.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‡ªå·±å®ç°äº†ä¸€ä¸ª"),n("OutboundLink")],1),t._v("ã€‚å®ƒåˆ©ç”¨"),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/MessageChannel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("MessageChannel")]),n("OutboundLink")],1),t._v(" æ¨¡æ‹Ÿå°†å›è°ƒå»¶è¿Ÿåˆ°'ç»˜åˆ¶æ“ä½œ'ä¹‹åæ‰§è¡Œ:")]),t._v(" "),t._m(41),t._v(" "),n("p",[t._v("ç®€å•çœ‹ä¸€ä¸‹å®ç°çš„ä»£ç ï¼š")]),t._v(" "),t._m(42),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),n("p",[t._v("ç›´æ¥çœ‹å­ï¼š")]),t._v(" "),t._m(48),t._v(" "),t._m(49),t._m(50),t._v(" "),t._m(51),t._m(52),t._v(" "),t._m(53),n("p",[t._v("ç”»ä¸ªæµç¨‹å›¾å§ï¼")]),t._v(" "),t._m(54)])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("æ“ä½œç³»ç»Ÿé‡Œè®²è¿‡"),s("code",[this._v("è¿›ç¨‹è°ƒåº¦")]),this._v("çš„å‡ ç§æ–¹å¼ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecc24dfd080c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("**å“åº”é€Ÿç‡ã€‚**è¿›ç¨‹ç­‰å¾…è¢«æ‰§è¡Œçš„æ—¶é—´")]),this._v(" "),s("li",[this._v("**å…¬å¹³æ€§ã€‚**å…¼é¡¾çŸ­è¿›ç¨‹ã€é•¿è¿›ç¨‹ã€I/Oè¿›ç¨‹")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("JavaScript æ˜¯"),s("code",[this._v("å•çº¿ç¨‹")]),this._v("è¿è¡Œï¼Œå®ƒè¦è´Ÿè´£é¡µé¢çš„JSè§£æå’Œæ‰§è¡Œã€ç»˜åˆ¶ã€äº‹ä»¶å¤„ç†ã€é™æ€èµ„æºåŠ è½½å’Œå¤„ç†ï¼Œè¿™äº›ä»»åŠ¡å¯ä»¥ç±»æ¯”è¢«è°ƒåº¦çš„â€™è¿›ç¨‹â€˜ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("è¿™é‡Œç‰¹æŒ‡Javascript å¼•æ“æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ã€‚ ä¸¥æ ¼æ¥è¯´ï¼ŒJavascript å¼•æ“å’Œé¡µé¢æ¸²æŸ“å¼•æ“åœ¨åŒä¸€ä¸ª"),s("code",[this._v("æ¸²æŸ“çº¿ç¨‹")]),this._v("ï¼ŒGUI æ¸²æŸ“å’Œ Javascriptæ‰§è¡Œ ä¸¤è€…æ˜¯äº’æ–¥çš„. å¦å¤–å¼‚æ­¥ I/O æ“ä½œåº•å±‚å®é™…ä¸Šå¯èƒ½æ˜¯å¤šçº¿ç¨‹çš„åœ¨é©±åŠ¨ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecc35b99001e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("å®ƒåªæ˜¯ä¸€ä¸ª'JavaScript'ï¼ŒåŒæ—¶åªèƒ½åšä¸€ä»¶äº‹æƒ…ï¼Œè¿™ä¸ªå’Œ DOS çš„å•ä»»åŠ¡æ“ä½œç³»ç»Ÿä¸€æ ·çš„ï¼Œäº‹æƒ…åªèƒ½ä¸€ä»¶ä¸€ä»¶çš„å¹²ã€‚è¦æ˜¯å‰é¢æœ‰ä¸€ä¸ªå‚»å‰ä»»åŠ¡é•¿æœŸéœ¸å CPUï¼Œåé¢ä»€ä¹ˆäº‹æƒ…éƒ½å¹²ä¸äº†ï¼Œæµè§ˆå™¨ä¼šå‘ˆç°å¡æ­»çš„çŠ¶æ€ï¼Œè¿™æ ·çš„ç”¨æˆ·ä½“éªŒå°±ä¼šéå¸¸å·®")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("å¯¹äºâ€™å‰ç«¯æ¡†æ¶â€˜æ¥è¯´ï¼Œè§£å†³è¿™ç§é—®é¢˜æœ‰ä¸‰ä¸ªæ–¹å‘")]),this._v(":")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("1ï¸âƒ£ ä¼˜åŒ–æ¯ä¸ªä»»åŠ¡ï¼Œè®©å®ƒæœ‰å¤šå¿«å°±å¤šå¿«ã€‚æŒ¤å‹CPUè¿ç®—é‡")]),this._v(" "),s("li",[this._v("2ï¸âƒ£ å¿«é€Ÿå“åº”ç”¨æˆ·ï¼Œè®©ç”¨æˆ·è§‰å¾—å¤Ÿå¿«ï¼Œä¸èƒ½é˜»å¡ç”¨æˆ·çš„äº¤äº’")]),this._v(" "),s("li",[this._v("3ï¸âƒ£ å°è¯• Worker å¤šçº¿ç¨‹")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("React ä¸ºä»€ä¹ˆè¦å¼•å…¥ Fiber æ¶æ„ï¼Ÿ çœ‹çœ‹ä¸‹é¢çš„ç«ç„°å›¾ï¼Œè¿™æ˜¯React V15 ä¸‹é¢çš„ä¸€ä¸ªåˆ—è¡¨æ¸²æŸ“èµ„æºæ¶ˆè€—æƒ…å†µã€‚æ•´ä¸ªæ¸²æŸ“èŠ±è´¹äº†130ms, "),s("strong",[this._v("ğŸ”´åœ¨è¿™é‡Œé¢ React ä¼šé€’å½’æ¯”å¯¹VirtualDOMæ ‘ï¼Œæ‰¾å‡ºéœ€è¦å˜åŠ¨çš„èŠ‚ç‚¹ï¼Œç„¶ååŒæ­¥æ›´æ–°å®ƒä»¬ï¼Œ ä¸€æ°”å‘µæˆã€‚è¿™ä¸ªè¿‡ç¨‹ React ç§°ä¸º Reconcilation(ä¸­æ–‡å¯ä»¥è¯‘ä¸ºåè°ƒ)")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecc366f124be?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("åœ¨ "),s("code",[this._v("Reconcilation")]),this._v(" æœŸé—´ï¼ŒReact ä¼šéœ¸å ç€æµè§ˆå™¨èµ„æºï¼Œä¸€åˆ™ä¼šå¯¼è‡´ç”¨æˆ·è§¦å‘çš„äº‹ä»¶å¾—ä¸åˆ°å“åº”ï¼ŒäºŒåˆ™ä¼šå¯¼è‡´æ‰å¸§ï¼Œç”¨æˆ·å¯ä»¥æ„ŸçŸ¥åˆ°è¿™äº›å¡é¡¿ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("æ‰€ä»¥React æ˜¯æ€ä¹ˆä¼˜åŒ–çš„ï¼Ÿ åˆ’é‡ç‚¹ï¼Œ "),s("strong",[this._v("ğŸ”´ä¸ºäº†ç»™ç”¨æˆ·åˆ¶é€ ä¸€ç§åº”ç”¨å¾ˆå¿«çš„'å‡è±¡'ï¼Œæˆ‘ä»¬ä¸èƒ½è®©ä¸€ä¸ªç¨‹åºé•¿æœŸéœ¸å ç€èµ„æº. ä½ å¯ä»¥å°†æµè§ˆå™¨çš„æ¸²æŸ“ã€å¸ƒå±€ã€ç»˜åˆ¶ã€èµ„æºåŠ è½½(ä¾‹å¦‚HTMLè§£æ)ã€äº‹ä»¶å“åº”ã€è„šæœ¬æ‰§è¡Œè§†ä½œæ“ä½œç³»ç»Ÿçš„'è¿›ç¨‹'ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æŸäº›è°ƒåº¦ç­–ç•¥åˆç†åœ°åˆ†é…CPUèµ„æºï¼Œä»è€Œæé«˜æµè§ˆå™¨çš„ç”¨æˆ·å“åº”é€Ÿç‡, åŒæ—¶å…¼é¡¾ä»»åŠ¡æ‰§è¡Œæ•ˆç‡")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("ğŸ”´æ‰€ä»¥ React é€šè¿‡Fiber æ¶æ„ï¼Œè®©è‡ªå·±çš„Reconcilation è¿‡ç¨‹å˜æˆå¯è¢«ä¸­æ–­ã€‚ 'é€‚æ—¶'åœ°è®©å‡ºCPUæ‰§è¡Œæƒï¼Œé™¤äº†å¯ä»¥è®©æµè§ˆå™¨åŠæ—¶åœ°å“åº”ç”¨æˆ·çš„äº¤äº’ï¼Œè¿˜æœ‰å…¶ä»–å¥½å¤„")]),this._v(":")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("ä¸å…¶ä¸€æ¬¡æ€§æ“ä½œå¤§é‡ DOM èŠ‚ç‚¹ç›¸æ¯”, åˆ†æ‰¹å»¶æ—¶å¯¹DOMè¿›è¡Œæ“ä½œï¼Œå¯ä»¥å¾—åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚")]),this._v(" "),s("li",[s("strong",[this._v("ğŸ”´ç»™æµè§ˆå™¨ä¸€ç‚¹å–˜æ¯çš„æœºä¼šï¼Œä»–ä¼šå¯¹ä»£ç è¿›è¡Œç¼–è¯‘ä¼˜åŒ–ï¼ˆJITï¼‰åŠè¿›è¡Œçƒ­ä»£ç ä¼˜åŒ–ï¼Œæˆ–è€…å¯¹reflowè¿›è¡Œä¿®æ­£")]),this._v("ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"react-fiber-çš„ä¸¤ç§è§£è¯»æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-fiber-çš„ä¸¤ç§è§£è¯»æ–¹å¼"}},[this._v("#")]),this._v(" React Fiber çš„ä¸¤ç§è§£è¯»æ–¹å¼")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ä¸€ç§æµç¨‹æ§åˆ¶åŸè¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ç§æµç¨‹æ§åˆ¶åŸè¯­"}},[this._v("#")]),this._v(" ä¸€ç§æµç¨‹æ§åˆ¶åŸè¯­")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("Fiber ä¹Ÿç§°"),n("code",[t._v("åç¨‹")]),t._v("ã€æˆ–è€…"),n("code",[t._v("çº¤ç¨‹")]),t._v("ã€‚ "),n("code",[t._v("ES6")]),t._v(" æ–°å¢çš„"),n("code",[t._v("Generator")]),t._v("ä¹Ÿæ˜¯é‡‡ç”¨"),n("code",[t._v("åç¨‹")]),t._v("çš„æœºåˆ¶ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("çœ‹çœ‹ "),s("code",[this._v("Generator")]),this._v(" å‡½æ•°æ˜¯å¦‚ä½•åœ¨æ‰§è¡Œçš„æ—¶å€™è¢«ä¸­æ–­å’Œæ¢å¤çš„")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tasks "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" task\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tasks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ åˆ¤æ–­æ˜¯å¦æœ‰é«˜ä¼˜å…ˆçº§äº‹ä»¶éœ€è¦å¤„ç†, æœ‰çš„è¯è®©å‡ºæ§åˆ¶æƒ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasHighPriorityEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†å®Œé«˜ä¼˜å…ˆçº§äº‹ä»¶åï¼Œæ¢å¤å‡½æ•°è°ƒç”¨æ ˆï¼Œç»§ç»­æ‰§è¡Œ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" g "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ng"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡åˆ° yield ä¸­æ–­")]),t._v("\ng"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¢å¤ä¸­æ–­")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("React Fiber çš„æ€æƒ³å’Œåç¨‹çš„æ¦‚å¿µæ˜¯å¥‘åˆçš„: "),s("strong",[this._v("ğŸ”´React æ¸²æŸ“çš„è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­ï¼Œå¯ä»¥å°†æ§åˆ¶æƒäº¤å›æµè§ˆå™¨ï¼Œè®©ä½ç»™é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œæµè§ˆå™¨ç©ºé—²åå†æ¢å¤æ¸²æŸ“")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("1ï¸âƒ£ æµè§ˆå™¨æ²¡æœ‰æŠ¢å çš„æ¡ä»¶ï¼Œæ‰€ä»¥Reactåªèƒ½ç”¨è®©å‡ºæœºåˆ¶?")]),this._v(" "),s("li",[this._v("2ï¸âƒ£ æ€ä¹ˆç¡®å®šæœ‰é«˜ä¼˜å…ˆä»»åŠ¡è¦å¤„ç†ï¼Œå³ä»€ä¹ˆæ—¶å€™è®©å‡ºï¼Ÿ")]),this._v(" "),s("li",[this._v("3ï¸âƒ£ React é‚£ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ Generatorï¼Ÿ")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å’Œä¹‹å‰çš„"),s("code",[this._v("æŠ¢å å¼è¿›ç¨‹è°ƒåº¦")]),this._v("ä¸åŒçš„æ˜¯ï¼Œåç¨‹çš„è¿™ç§è°ƒåº¦æœºåˆ¶ä¸º"),s("code",[this._v("åˆä½œå¼è°ƒåº¦")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("ç­”2ï¸âƒ£: "),s("code",[this._v("requestIdleCallback API")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ä¸Šé¢ä»£ç ç¤ºä¾‹ä¸­çš„ "),s("code",[this._v("hasHighPriorityEvent()")]),this._v(" åœ¨ç›®å‰æµè§ˆå™¨ä¸­æ˜¯æ— æ³•å®ç°çš„ï¼Œæˆ‘ä»¬æ²¡åŠæ³•åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ç­‰å¾…è¢«æ‰§è¡Œã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("åªèƒ½æ¢ä¸€ç§æ€è·¯ï¼Œé€šè¿‡"),s("strong",[this._v("è¶…æ—¶æ£€æŸ¥çš„æœºåˆ¶æ¥è®©å‡ºæ§åˆ¶æƒ")]),this._v("ã€‚è§£å†³åŠæ³•æ˜¯: "),s("em",[this._v("ç¡®å®šä¸€ä¸ªåˆç†çš„è¿è¡Œæ—¶é•¿ï¼Œç„¶ååœ¨åˆé€‚çš„æ£€æŸ¥ç‚¹æ£€æµ‹æ˜¯å¦è¶…æ—¶(æ¯”å¦‚æ¯æ‰§è¡Œä¸€ä¸ªå°ä»»åŠ¡)ï¼Œå¦‚æœè¶…æ—¶å°±åœæ­¢æ‰§è¡Œï¼Œå°†æ§åˆ¶æƒäº¤æ¢ç»™æµè§ˆå™¨")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å…¶å®æµè§ˆå™¨æä¾›äº†ç›¸å…³çš„æ¥å£ â€”â€” "),s("code",[this._v("requestIdleCallback")]),this._v("APIï¼š")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dealine"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" IdleDeadline")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  option"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("timeout"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("IdleDeadline")]),this._v("çš„æ¥å£å¦‚ä¸‹ï¼š")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IdleDealine")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  didTimeout"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨ç¤ºä»»åŠ¡æ‰§è¡Œæ˜¯å¦è¶…è¿‡çº¦å®šæ—¶é—´")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeRemaining")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DOMHighResTimeStamp "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»»åŠ¡å¯ä¾›æ‰§è¡Œçš„å‰©ä½™æ—¶é—´")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å•ä»åå­—ä¸Šç†è§£çš„è¯, "),s("code",[this._v("requestIdleCallback")]),this._v("çš„æ„æ€æ˜¯"),s("strong",[this._v("è®©æµè§ˆå™¨åœ¨'æœ‰ç©º'çš„æ—¶å€™å°±æ‰§è¡Œæˆ‘ä»¬çš„å›è°ƒï¼Œè¿™ä¸ªå›è°ƒä¼šä¼ å…¥ä¸€ä¸ªæœŸé™ï¼Œè¡¨ç¤ºæµè§ˆå™¨æœ‰å¤šå°‘æ—¶é—´ä¾›æˆ‘ä»¬æ‰§è¡Œ, ä¸ºäº†ä¸è€½è¯¯äº‹ï¼Œæˆ‘ä»¬æœ€å¥½åœ¨è¿™ä¸ªæ—¶é—´èŒƒå›´å†…æ‰§è¡Œå®Œæ¯•")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("é‚£æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™æœ‰ç©ºï¼Ÿ")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecd81f16c6f2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("ä½ å¯ä»¥æ‰“å¼€ Chrome å¼€å‘è€…å·¥å…·çš„Performanceæ ‡ç­¾ï¼Œè¿™é‡Œå¯ä»¥è¯¦ç»†çœ‹åˆ°Javascriptçš„æ¯ä¸€å¸§éƒ½æ‰§è¡Œäº†ä»€ä¹ˆä»»åŠ¡(Task), èŠ±è´¹äº†å¤šå°‘æ—¶é—´ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecc428fb4c0b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("å›¾ç‰‡æ¥æº: ä½ åº”è¯¥çŸ¥é“çš„requestIdleCallback")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("å¤„ç†ç”¨æˆ·è¾“å…¥äº‹ä»¶")]),t._v(" "),n("li",[t._v("Javascriptæ‰§è¡Œ")]),t._v(" "),n("li",[t._v("requestAnimation è°ƒç”¨")]),t._v(" "),n("li",[t._v("å¸ƒå±€ Layout")]),t._v(" "),n("li",[t._v("ç»˜åˆ¶ Paint")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ä¸Šé¢è¯´ç†æƒ³çš„ä¸€å¸§æ—¶é—´æ˜¯ "),s("code",[this._v("16ms")]),this._v(" (1000ms / 60)ï¼Œå¦‚æœæµè§ˆå™¨å¤„ç†å®Œä¸Šè¿°çš„ä»»åŠ¡(å¸ƒå±€å’Œç»˜åˆ¶ä¹‹å)ï¼Œè¿˜æœ‰ç›ˆä½™æ—¶é—´ï¼Œæµè§ˆå™¨å°±ä¼šè°ƒç”¨ "),s("code",[this._v("requestIdleCallback")]),this._v(" çš„å›è°ƒã€‚ä¾‹å¦‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecc43c710e16?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("ä½†æ˜¯åœ¨æµè§ˆå™¨ç¹å¿™çš„æ—¶å€™ï¼Œå¯èƒ½ä¸ä¼šæœ‰ç›ˆä½™æ—¶é—´ï¼Œè¿™æ—¶å€™requestIdleCallbackå›è°ƒå¯èƒ½å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚ ä¸ºäº†é¿å…é¥¿æ­»ï¼Œå¯ä»¥é€šè¿‡requestIdleCallbackçš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªè¶…æ—¶æ—¶é—´")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("å¦å¤–ä¸å»ºè®®åœ¨"),s("code",[this._v("requestIdleCallback")]),this._v("ä¸­è¿›è¡Œ"),s("code",[this._v("DOM")]),this._v("æ“ä½œï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´æ ·å¼é‡æ–°è®¡ç®—æˆ–é‡æ–°å¸ƒå±€(æ¯”å¦‚æ“ä½œDOMåé©¬ä¸Šè°ƒç”¨ "),s("code",[this._v("getBoundingClientRect")]),this._v(")ï¼Œè¿™äº›æ—¶é—´å¾ˆéš¾é¢„ä¼°çš„ï¼Œå¾ˆæœ‰å¯èƒ½å¯¼è‡´å›è°ƒæ‰§è¡Œè¶…æ—¶ï¼Œä»è€Œæ‰å¸§ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deecc5839a3974?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" btn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageChannel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pendingCallback\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" startTime\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timeout\n\nch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("work")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ç»˜åˆ¶ä¹‹åè¢«æ‰§è¡Œ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pendingCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" now "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡now - startTimeå¯ä»¥è®¡ç®—å‡ºrequestAnimationFrameåˆ°ç»˜åˆ¶ç»“æŸçš„æ‰§è¡Œæ—¶é—´")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡è¿™äº›æ•°æ®æ¥è®¡ç®—å‰©ä½™æ—¶é—´")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦å¤–è¿˜è¦å¤„ç†è¶…æ—¶(timeout)ï¼Œé¿å…ä»»åŠ¡è¢«é¥¿æ­»")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hasRemain "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" noTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pendingCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deadline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("simpleRequestIdleCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("animation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ç»˜åˆ¶ä¹‹å‰è¢«æ‰§è¡Œ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•å¼€å§‹æ—¶é—´")]),t._v("\n    startTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    timeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timeout\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dosomething")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒåº¦å›è°ƒåˆ°ç»˜åˆ¶ç»“æŸåæ‰§è¡Œ")]),t._v("\n    pendingCallback "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback\n    ch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("ä»»åŠ¡ä¼˜å…ˆçº§")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ä¸Šé¢è¯´äº†ï¼Œä¸ºäº†é¿å…ä»»åŠ¡è¢«é¥¿æ­»ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´. "),s("strong",[this._v("è¿™ä¸ªè¶…æ—¶æ—¶é—´ä¸æ˜¯æ­»çš„ï¼Œä½ä¼˜å…ˆçº§çš„å¯ä»¥æ…¢æ…¢ç­‰å¾…, é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡åº”è¯¥ç‡å…ˆè¢«æ‰§è¡Œ")]),this._v(". ç›®å‰ React é¢„å®šä¹‰äº† 5 ä¸ªä¼˜å…ˆçº§, è¿™ä¸ªæˆ‘åœ¨[ã€Šè°ˆè°ˆReactäº‹ä»¶æœºåˆ¶å’Œæœªæ¥(react-events)ã€‹]ä¸­ä¹Ÿä»‹ç»è¿‡:")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("code",[t._v("Immediate")]),t._v("(-1) - è¿™ä¸ªä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼šåŒæ­¥æ‰§è¡Œ, æˆ–è€…è¯´è¦é©¬ä¸Šæ‰§è¡Œä¸”ä¸èƒ½ä¸­æ–­")]),t._v(" "),n("li",[n("code",[t._v("UserBlocking")]),t._v("(250ms) è¿™äº›ä»»åŠ¡ä¸€èˆ¬æ˜¯ç”¨æˆ·äº¤äº’çš„ç»“æœ, éœ€è¦å³æ—¶å¾—åˆ°åé¦ˆ")]),t._v(" "),n("li",[n("code",[t._v("Normal")]),t._v(" (5s) åº”å¯¹å“ªäº›ä¸éœ€è¦ç«‹å³æ„Ÿå—åˆ°çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚")]),t._v(" "),n("li",[n("code",[t._v("Low")]),t._v(" (10s) è¿™äº›ä»»åŠ¡å¯ä»¥æ”¾åï¼Œä½†æ˜¯æœ€ç»ˆåº”è¯¥å¾—åˆ°æ‰§è¡Œ. ä¾‹å¦‚åˆ†æé€šçŸ¥")]),t._v(" "),n("li",[n("code",[t._v("Idle")]),t._v(" (æ²¡æœ‰è¶…æ—¶æ—¶é—´) ä¸€äº›æ²¡æœ‰å¿…è¦åšçš„ä»»åŠ¡ (e.g. æ¯”å¦‚éšè—çš„å†…å®¹), å¯èƒ½ä¼šè¢«é¥¿æ­»")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ä¸€ä¸ªæ‰§è¡Œå•å…ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªæ‰§è¡Œå•å…ƒ"}},[this._v("#")]),this._v(" ä¸€ä¸ªæ‰§è¡Œå•å…ƒ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Fiberçš„å¦å¤–ä¸€ç§è§£è¯»æ˜¯â€™çº¤ç»´â€˜ï¼š"),s("strong",[this._v("è¿™æ˜¯ä¸€ç§æ•°æ®ç»“æ„æˆ–è€…è¯´æ‰§è¡Œå•å…ƒ")]),this._v("ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å‡è®¾ç”¨æˆ·è°ƒç”¨ "),s("code",[this._v("setState")]),this._v(" æ›´æ–°ç»„ä»¶, è¿™ä¸ªå¾…æ›´æ–°çš„ä»»åŠ¡ä¼šå…ˆæ”¾å…¥é˜Ÿåˆ—ä¸­, ç„¶åé€šè¿‡ "),s("code",[this._v("requestIdleCallback")]),this._v(" è¯·æ±‚æµè§ˆå™¨è°ƒåº¦ï¼š")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("updateQueue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updateTask"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("performWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ç°åœ¨æµè§ˆå™¨æœ‰ç©ºé—²æˆ–è€…è¶…æ—¶äº†å°±ä¼šè°ƒç”¨"),s("code",[this._v("performWork")]),this._v("æ¥æ‰§è¡Œä»»åŠ¡ï¼š")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1ï¸âƒ£ performWork ä¼šæ‹¿åˆ°ä¸€ä¸ªDeadlineï¼Œè¡¨ç¤ºå‰©ä½™æ—¶é—´")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("performWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deadline")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2ï¸âƒ£ å¾ªç¯å–å‡ºupdateQueueä¸­çš„ä»»åŠ¡")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updateQueue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" deadline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeRemaining")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENOUGH_TIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("workLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deadline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3ï¸âƒ£ å¦‚æœåœ¨æœ¬æ¬¡æ‰§è¡Œä¸­ï¼Œæœªèƒ½å°†æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œé‚£å°±å†è¯·æ±‚æµè§ˆå™¨è°ƒåº¦")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updateQueue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("performWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("workLoop çš„å·¥ä½œå¤§æ¦‚çŒœåˆ°äº†ï¼Œå®ƒä¼šä»æ›´æ–°é˜Ÿåˆ—("),s("code",[this._v("updateQueue")]),this._v(")ä¸­å¼¹å‡ºæ›´æ–°ä»»åŠ¡æ¥æ‰§è¡Œï¼Œæ¯æ‰§è¡Œå®Œä¸€ä¸ªâ€˜æ‰§è¡Œå•å…ƒâ€˜ï¼Œå°±æ£€æŸ¥ä¸€ä¸‹å‰©ä½™æ—¶é—´æ˜¯å¦å……è¶³ï¼Œå¦‚æœå……è¶³å°±è¿›è¡Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œåä¹‹åˆ™åœæ­¢æ‰§è¡Œï¼Œä¿å­˜ç°åœºï¼Œç­‰ä¸‹ä¸€æ¬¡æœ‰æ‰§è¡Œæƒæ—¶æ¢å¤")]),this._v(":")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿å­˜å½“å‰çš„å¤„ç†ç°åœº")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" nextUnitOfWork"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Fiber "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿å­˜ä¸‹ä¸€ä¸ªéœ€è¦å¤„ç†çš„å·¥ä½œå•å…ƒ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" topWork"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Fiber "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿å­˜ç¬¬ä¸€ä¸ªå·¥ä½œå•å…ƒ")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("workLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deadline"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" IdleDeadline")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// updateQueueä¸­è·å–ä¸‹ä¸€ä¸ªæˆ–è€…æ¢å¤ä¸Šä¸€æ¬¡ä¸­æ–­çš„æ‰§è¡Œå•å…ƒ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextUnitOfWork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    nextUnitOfWork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" topWork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNextUnitOfWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ æ¯æ‰§è¡Œå®Œä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œæ£€æŸ¥ä¸€æ¬¡å‰©ä½™æ—¶é—´")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœè¢«ä¸­æ–­ï¼Œä¸‹ä¸€æ¬¡æ‰§è¡Œè¿˜æ˜¯ä» nextUnitOfWork å¼€å§‹å¤„ç†")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextUnitOfWork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" deadline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeRemaining")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENOUGH_TIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‹æ–‡æˆ‘ä»¬å†çœ‹performUnitOfWork")]),t._v("\n    nextUnitOfWork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("performUnitOfWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextUnitOfWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤å·¥ä½œï¼Œä¸‹æ–‡ä¼šä»‹ç»")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pendingCommit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitAllWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pendingCommit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/21/16deed1711f281b3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})])}],!1,null,null,null);s.default=e.exports}}]);