(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{217:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h2",{attrs:{id:"set-和-weakset、map-和-weakmap-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-和-weakset、map-和-weakmap-区别"}},[t._v("#")]),t._v(" Set 和 WeakSet、Map 和 WeakMap 区别")]),t._v(" "),s("h3",{attrs:{id:"map-和-weakmap-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map-和-weakmap-区别"}},[t._v("#")]),t._v(" "),s("code",[t._v("map")]),t._v(" 和 "),s("code",[t._v("weakmap")]),t._v(" 区别")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("WeakMap")]),t._v("只接受对象作为键名（"),s("code",[t._v("null")]),t._v("除外），不接受其他类型的值作为键名。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("WeakMap")]),t._v("的键名所指向的对象（"),s("strong",[t._v("弱引用")]),t._v("），不计入垃圾回收机制。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeakMap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'example'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'some information'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nwm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "some information"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("上面的 DOM 节点对象的引用计数是"),s("code",[t._v("1")]),t._v("，而不是"),s("code",[t._v("2")]),t._v("。这时，一旦消除对该节点的引用，它占用的内存就会被垃圾回收机制释放。"),s("code",[t._v("weakmap")]),t._v(" 保存的这个键值对，也会自动消失。")]),t._v(" "),s("p",[s("code",[t._v("WeakMap")]),t._v("的专用场合就是，它的键所对应的对象，可能会在将来消失。"),s("code",[t._v("WeakMap")]),t._v("结构有助于防止内存泄漏。")])])]),t._v(" "),s("h2",{attrs:{id:"set-和-weakset-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-和-weakset-的区别"}},[t._v("#")]),t._v(" "),s("code",[t._v("set")]),t._v(" 和 "),s("code",[t._v("weakset")]),t._v(" 的区别")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("weakset")]),t._v(" 的成员只能是对象，而不能是其他类型的值。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("weakset")]),t._v(" 中的对象都是"),s("strong",[t._v("弱引用")]),t._v("，即垃圾回收机制不考虑 "),s("code",[t._v("weakset")]),t._v(" 对该对象的引用，也就是说，如果其他对象都不再引用该对象，那么垃圾回收机制会自动回收该对象所占用的内存，不考虑该对象还存在于 "),s("code",[t._v("weakset")]),t._v(" 之中。")]),t._v(" "),s("p",[t._v("只要这些对象在外部消失，它在 "),s("code",[t._v("weakset")]),t._v(" 里面的引用就会自动消失。")])])])])}],!1,null,null,null);a.default=n.exports}}]);