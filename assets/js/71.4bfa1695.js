(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{276:function(t,v,_){"use strict";_.r(v);var s=_(0),a=Object(s.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("div",{staticClass:"content"},[_("h2",{attrs:{id:"tcp流量控制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp流量控制"}},[t._v("#")]),t._v(" TCP流量控制")]),t._v(" "),_("div",{staticClass:"tip custom-block"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("流量控制所要做的事，就是通过接收缓冲区的大小，控制发送端的发送。")]),t._v(" "),_("p",[t._v("::;")]),t._v(" "),_("h3",{attrs:{id:"tcp-滑动窗口"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp-滑动窗口"}},[t._v("#")]),t._v(" TCP 滑动窗口")]),t._v(" "),_("blockquote",[_("p",[t._v("滑动窗口分两种，发送窗口和接收窗口。")])]),t._v(" "),_("p",[t._v("发送窗口")]),t._v(" "),_("p",[t._v("发送端的滑动窗口结构如下:")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://zhuzhu-chou.github.io/images/010.jpg",alt:""}})]),t._v(" "),_("p",[t._v("一些重要的概念标注在图中：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://zhuzhu-chou.github.io/images/011.jpg",alt:""}})]),t._v(" "),_("p",[t._v("发送窗口就是图中被框住的范围。SND 即"),_("code",[t._v("send")]),t._v(", WND 即"),_("code",[t._v("window")]),t._v("，UNA 即"),_("code",[t._v("unacknowledged")]),t._v("，表示未被确认（凡是已经发送出去的数据，在未收到确认之前都必须暂时保留，以便在"),_("strong",[t._v("超时重传")]),t._v("时使用），NXT 即"),_("code",[t._v("next")]),t._v("，表示下一个发送的位置。")]),t._v(" "),_("h3",{attrs:{id:"接收窗口"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#接收窗口"}},[t._v("#")]),t._v(" 接收窗口")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://zhuzhu-chou.github.io/images/012.jpg",alt:""}})]),t._v(" "),_("p",[t._v("REV 即 "),_("code",[t._v("receive")]),t._v("，NXT 表示下一个接收的位置，WND 表示接收窗口大小。")]),t._v(" "),_("h3",{attrs:{id:"流量控制过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#流量控制过程"}},[t._v("#")]),t._v(" 流量控制过程")]),t._v(" "),_("p",[t._v("首先双方三次握手，初始化各自的窗口大小，均为 200 个字节。")]),t._v(" "),_("ul",[_("li",[t._v("A 向 B 发送 100 个字节数据。")]),t._v(" "),_("li",[t._v("对于 A，"),_("code",[t._v("SND.NXT")]),t._v(" 向右移动 100 个字节，即当前的可用窗口减少了 100 个字节。")]),t._v(" "),_("li",[t._v("这 100 个到达了接收端，被放到接收端的缓冲队列中。不过此时由于大量负载的原因，接收端处理不了这么多字节，只能处理 40 个字节，剩下的 "),_("code",[t._v("60")]),t._v(" 个字节被留在了缓冲队列中。")]),t._v(" "),_("li",[t._v("对于B，"),_("code",[t._v("REV.NXT")]),t._v(" 向右移动 60 个字节，即接收端口由 200 个字节变为 140。")]),t._v(" "),_("li",[t._v("B 会在 ACK 的报文首部带上缩小后的滑动窗口 140 字节，A 对应地调整发送窗口的大小为 140 个字节。")]),t._v(" "),_("li",[t._v("对于 A，"),_("code",[t._v("SND.UNA")]),t._v(" 右移 40 个字节，即已经发送且确认的部分增加 40 字节，同时"),_("strong",[t._v("发送窗口")]),t._v("缩小为 140 个字节。（注意：发送窗口前沿"),_("strong",[t._v("向后收缩")]),t._v("容易出现一些错误）")])])])])}],!1,null,null,null);v.default=a.exports}}]);